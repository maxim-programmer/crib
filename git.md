# Введение в Git

Команда `git init` создает репозиторий - директорию .git, которая содержит все необходимые для работы Git-файлы.

С помощью `git status` можно посмотреть статус репозитория.

Команда для добавления файла в индекс - `git add <путь до файла>`.

Команда для коммита - `git commit -m "<message>"`.

Подключение удаленного репозитория с локальным - `git remote add origin <...>`.

Запушить изменения - `git push`.

Клонировать репозиторий с помощью команды `git clone`.

Команда `git pull --rebase`, которая скачивает из внешнего репозитория новые коммиты и добавляет их в локальный репозиторий.

Команда `git rm <file>` равносильна `rm + git add`.

Команда `git diff` показывает разницу между тем, что было и стало. Вывод этой команды содержит только строки, которые изменились - и иногда строки вокруг для удобства анализа. Слева ставится знак: + (строка была добавлена) и - (строка была удалена).

Команда `git diff --staged` выведет изменения, сделанные в рабочей директории и уже добавленные в индекс.

Команда `git log` показывает список всех выполненных коммитов, отсортированных по дате добавления.

У команды `git log` есть полезный флаг `-p`, который сразу выводит диф для каждого коммита.

Команда `git show <hash>` выводит диф между этим коммитом и предыдущим.

Команда `git blame <путь до файла>` выводит файл и рядом с каждой строчкой показывает того, кто её менял и в каком коммите.

Команда `git grep` ищет совпадение с указанной строкой во всех файлах проекта. Флаг `i` позволяет искать без учета регистра. Также можно искать в конкретном коммите `git grep Word <hash>`.

**Неотслеживаемые файлы**: Вы добавили новые файлы в репозиторий и поняли, что они вам не нужны. Командой `git clean -fd` выполняем очистку. Команда удалит все неотслеживаемые файлы. (-f - force, -d - directory)

**Измененные файлы в рабочей директории**: Для отмены изменений в таких файлах используется команда `git restore <имя файла>`.

**Изменения, подготовленные к коммиту**: С помощью команды `git restore --staged <имя файла>` отменяем индексацию, не изменяя файлы в рабочей директории. А после командой `git restore <имя файла>` можно окончательно отменить изменения в выбранных файлах.

Команда `git revert <hash>` для отмены изменений. Фактически она сводится к созданию еще одного коммита, который выполняет изменения, противоположные тому коммиту, который отменяется.

Если коммит был сделан только сейчас и еще не отправлялся на GitHub, то его можно удалить командой `git reset --hard HEAD~`. Флаг `--hard` означает полное удаление. Без него просто отменится коммит, но не удалит его, а поместит все изменения этого коммита в рабочую директорию, так что с ними можно будет продолжать работать (флаг `--mixed` по умолчанию). Флаг `HEAD~` означает "один коммит от последнего коммита". Если бы мы хотели удалить два последних коммита, то могли бы написать `HEAD~2`. Флаг `--soft` позволяет сохранить изменения в индексе.

Если изменения еще не были отправлены во внешнюю систему, можно добавить изменения в текущий коммит. Для этого во время коммита добавляется флаг `--amend`. В итоге получаем: `git commit --amend`. Чтобы не открывался редактор для ввода описания коммита можно добавить опцию `--no-edit`.

`git commit -am "do something"` - коммит с одновременным добавлением всего в индекс.

Команда `git add -i` показывает измененные куски файлов и спрашивает, что с ними делать. То есть разделить изменения по разным коммитам.

Команда `git checkout <hash>` переключается в указанный коммит.

Команда `git branch` позволяет создавать, просматривать, переименовывать и удалять ветки.

Команда `git log --oneline` показывает сокращенный вывод.

Команда `git log --graph` вывод в виде графа.

Файл `.gitignore` нужен для игнорирования определенных файлов и директорий. 
Например:
- `access.log` - игнорируем файл в любой директории проекта
- `node_modules/` - игнорируем директорию в любой директории проекта
- `/coverage/` - игнорируем каталог в корне рабочей директории
- `/db/*.sqlite3` - игнорируем все файлы с расширением sqlite3  в директории db
- `doc/**/*.txt` -  игнорируем все .txt файлы в каталоге doc/ на всех уровнях вложенности

Ситуация: вы работаете над какой-то важной задачей и исправили довольно много файлов. В этот момент появляется срочная задача - сделать какое-то изменение в исходном коде, не связанное с тем, над чем вы сейчас работаете. Ваши изменения еще не готовы, и они не должны попасть в репозиторий. Нам поможет Stash.

Команда `git stash` помещает в специальное место внутри директории .git на временное хранение. Эта команда не трогает новые файлы, так как они еще не являются частью репозитория.

После выполнения всех нужных изменений в чистой рабочей директории можно вернуть спрятанные изменения с помощью команды `git stash pop`.

Стэш в Git работает по принципу стека. Он позволяет сохранить внутрь любое количество изменений и восстановить их в обратном порядке.
